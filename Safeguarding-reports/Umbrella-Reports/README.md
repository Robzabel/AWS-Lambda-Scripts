This safeguarding report is generated by making a request to the Umbrella API for blocked requests over a time period defined in the code.
A second request is made to the Meraki MX of the comapny to retrieve all devices on the network.
The Umbreall and Meraki responses are compared against each other to see if the internal IP address matches.
If an address is matched, a second request is made to the Meraki for further details on the user that made the request.
With the user information and the blocked DNS request, a table entry is created.

If the function is run at 00:00, A Jinja2 template is retrieved from an S3 bucket and loaded into memory. The program then adds the user information and blocked DNS 
requests to the table, creating the safeguarding report.
If the time is past 00:00, then the template is not loaded, but the report that was previously created with the days date.
Beautiful soup is used to parse the HTML of the report into memory, the latest information retrieved by the function is then appended to the current report table.
The report is then saved back to S3.

An AWS EentBridge event triggers the email function to run at 9:00am each weekday.
The email function takes the report from S3 then sends it directly attached to the specified recipients.